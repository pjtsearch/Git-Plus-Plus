{"version":3,"file":"shortcut.js","sources":["webpack:///shortcut.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.shortcutJS=t():e.shortcutJS=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=7)}([function(e,t,n){\"use strict\";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=n(6),u=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o(this,e),this.alt=t,this.cmd=n,this.ctrl=r,this.shift=i};t.ComboStateKeys=u;var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new u;if(o(this,e),this.keys=t,this.stateKeys=n,t&&!(t instanceof Set))throw new Error(\"Pass a set as a keys param\")}return i(e,[{key:\"addEvent\",value:function(t){var n=new u(t.altKey,t.metaKey,t.ctrlKey,t.shiftKey);Object.assign(this.stateKeys,n);var r=e.isStateKey(t.keyCode,a.keyContainer.getStateKeys());return!this.keys.has(t.keyCode)&&!r&&(this.keys.add(t.keyCode),!0)}},{key:\"hasStateKeys\",value:function(){var e=this.stateKeys,t=e.alt,n=e.cmd,r=e.ctrl,o=e.shift;return t||n||r||o}}],[{key:\"fromString\",value:function(t){var n=e.parse(t),r=n.keys,o=n.stateKeys;return new e(r,o)}},{key:\"isEqual\",value:function(e,t){return s.compareSets(e.keys,t.keys)&&JSON.stringify(e.stateKeys)===JSON.stringify(t.stateKeys)}},{key:\"parse\",value:function(t){var n=t.trim().replace(/\\s+/g,\" \").toLowerCase().split(\" \"),r=n.map(function(e){return a.keyContainer.getValue(e)});return e.splitCombo(r)}},{key:\"splitCombo\",value:function(t){var n={keys:new Set([]),stateKeys:new u},o=a.keyContainer.getStateKeys(),i=t.reduce(function(t,n){var i=Array.isArray(n)?n:[n],a=e.getStateKeys(i,o);return t.keys=new Set([].concat(r(t.keys),r(e.getNonStateKeys(i,a)))),a.forEach(function(e){return t.stateKeys[e.name]=!0}),t},n);return i}},{key:\"getStateKeys\",value:function(e,t){return t.filter(function(t){return e.includes(t.code)})}},{key:\"getNonStateKeys\",value:function(t,n){return t.filter(function(t){return!e.isStateKey(t,n)})}},{key:\"isStateKey\",value:function(e,t){return t.some(function(t){return t.code===e})}}]),e}();t.KeyCombo=c},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=function(){function e(t,n){if(r(this,e),!(n instanceof i.KeyCombo))throw new Error(\"The second parameter (keyCombo) must be an instance of KeyCombo\");this.name=t,this.keyCombo=n,this.callbacks=new Set}return o(e,[{key:\"addCallback\",value:function(e){this.callbacks.add(e)}},{key:\"removeCallback\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?this.callbacks.delete(e):this.callbacks=new Set}}]),e}();t.Action=a},function(e,t,n){\"use strict\";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),s=n(6),u=function(){function e(){o(this,e),this.reset()}return i(e,[{key:\"reset\",value:function(){this.currentCombo=new a.KeyCombo}},{key:\"processEvent\",value:function(e,t,n){var r=this.currentCombo.addEvent(e);if(!r)return!1;var o=!n.onlyStateCombos||n.onlyStateCombos&&this.currentCombo.hasStateKeys();o&&(n.debug&&this.printDebugKeyPressed(e),this.processActionCombos(e,t,n),this.currentCombo.stateKeys.cmd&&this.cleanCombo(n))}},{key:\"cleanCombo\",value:function(e){this.reset(),e.debug&&s.logger.log(\"ShortcutJS: Cleaned keyMap\")}},{key:\"processActionCombos\",value:function(e,t,n){var o=Array.apply(void 0,r(t.values()));n.reverseActions&&o.reverse();var i=!0,a=!1,s=void 0;try{for(var u,c=o[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=u.value;if(this.matchesComboAction(f)){n.debug&&this.printDebugActionFound(f),n.preventDefault&&e.preventDefault();var l=!0,y=!1,h=void 0;try{for(var v,m=f.callbacks[Symbol.iterator]();!(l=(v=m.next()).done);l=!0){var d=v.value;d(e)}}catch(e){y=!0,h=e}finally{try{!l&&m.return&&m.return()}finally{if(y)throw h}}return!1}}}catch(e){a=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}}},{key:\"matchesComboAction\",value:function(e){return a.KeyCombo.isEqual(this.currentCombo,e.keyCombo)}},{key:\"printDebugKeyPressed\",value:function(e){s.logger.group(\"ShortcutJS: KeyPressed\"),s.logger.log(\"Key: \",e.keyCode),s.logger.group(\"Current combo:\"),s.logger.log(\"Keys: \",[].concat(r(this.currentCombo.keys))),s.logger.log(\"State keys: \",this.currentCombo.stateKeys),s.logger.groupEnd(),s.logger.groupEnd()}},{key:\"printDebugActionFound\",value:function(e){s.logger.group(\"%cShortcutJS: Action Matched\",\"color: green\"),s.logger.log(\"Action: \",e.name),s.logger.group(\"Current combo:\"),s.logger.log(\"Keys: \",[].concat(r(this.currentCombo.keys))),s.logger.log(\"State keys: \",this.currentCombo.stateKeys),s.logger.groupEnd(),s.logger.log(e.callbacks.size+\" callbacks found\"),s.logger.groupEnd()}}]),e}();t.EventProcessor=u},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=n(0),s=function e(t){if(r(this,e),!t||!t.combo||!t.action)throw new Error(\"\\n        The json provided must be an array of { combo, action } object. Example\\n          [\\n            { action: 'openWindow', combo: 'ctrl a' }\\n          ]\\n      \");this.combo=t.combo,this.action=t.action};t.JsonActionCombo=s;var u=function(){function e(){r(this,e)}return o(e,null,[{key:\"parse\",value:function(e,t){if(!Array.isArray(t))throw new Error(\"The json provided must be an array\");t.forEach(function(t){var n=new s(t),r=a.KeyCombo.fromString(n.combo),o=new i.Action(n.action,r);e.addAction(o)})}}]),e}();t.JsonParser=u},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var o=function e(t){var n=this;if(r(this,e),this.debug=!1,this.preventDefault=!1,this.onlyStateCombos=!1,this.reverseActions=!1,t&&Object.keys(t).some(function(e){return\"undefined\"==typeof n[e]}))throw new Error(\"Some of the options are not correct. Checkout the docs at https://github.com/coosto/ShortcutJS for more info\");t&&Object.assign(this,t)};t.Options=o},function(e,t,n){\"use strict\";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){o(this,e),this.keyMap={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,\",\":188,\".\":190,shift:16,ctrl:17,alt:18,esc:27,escape:27,left:37,right:39,up:38,down:40,backspace:8,enter:13,pageup:33,pagedown:34,end:35,home:36,tab:9,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,\"num*\":106,\"num+\":107,\"num-\":109,\"num.\":110,\"num/\":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},this.stateKeys=[{name:\"shift\",code:16},{name:\"ctrl\",code:17},{name:\"alt\",code:18}]}return i(e,[{key:\"init\",value:function(e,t){this.stateKeys=[{name:\"shift\",code:16},{name:\"ctrl\",code:17},{name:\"alt\",code:18}];var n=[91,93];e.match(\"Mac\")&&t.match(\"Opera\")?n=[17]:e.match(\"Mac\")&&t.match(\"Firefox\")&&(n=[224]),this.keyMap=Object.assign(this.keyMap,{cmd:n}),this.keyMapReversed=this.buildReversedKeymap(this.keyMap),this.stateKeys=this.addCmdToSkipKeys(this.stateKeys,n)}},{key:\"getKeys\",value:function(){return this.keyMap}},{key:\"getKeysReversed\",value:function(){return this.keyMapReversed}},{key:\"getStateKeys\",value:function(){return this.stateKeys}},{key:\"getValue\",value:function(e){var t=this.keyMap[e];if(!t)throw new Error('The key \"'+e+'\" is not supported');return t}},{key:\"addCmdToSkipKeys\",value:function(e,t){var n=[].concat(r(e));return t.forEach(function(e){return n.push({name:\"cmd\",code:e})}),n}},{key:\"buildReversedKeymap\",value:function(e){var t={};return Object.keys(e).forEach(function(n){var r=e[n];Array.isArray(r)?r.forEach(function(e){return t[e]=n}):t[r]=n}),t}}]),e}();t.KeyContainer=a,t.keyContainer=new a},function(e,t,n){\"use strict\";function r(e,t){if(e.size!==t.size)return!1;for(var n=Array.from(e),r=Array.from(t),o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}t.logger=console,t.compareSets=r},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function o(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),s=n(1),u=n(2),c=n(3),f=function(){function e(){r(this,e),this.resetState()}return i(e,[{key:\"init\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.initialized||(this.options=new a.Options(e),window.addEventListener(\"keydown\",this.processEvent.bind(this)),window.addEventListener(\"keyup\",this.cleanCombo.bind(this)),this.initialized=!0)}},{key:\"reset\",value:function(){this.resetState(),window.removeEventListener(\"keydown\",this.processEvent),window.removeEventListener(\"keyup\",this.cleanCombo)}},{key:\"loadFromJson\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.init(t),c.JsonParser.parse(this,e)}},{key:\"addAction\",value:function(e){if(!(e instanceof s.Action))throw new Error(\"You must pass an Action instance object\");this.actions.set(e.name,e)}},{key:\"removeAction\",value:function(e){if(!(e instanceof s.Action))throw new Error(\"You must pass an Action instance object\");if(!this.actions.has(e.name))throw new Error(\"Action \"+e.name+\" does not exist\");this.actions.delete(e.name)}},{key:\"subscribe\",value:function(e,t){if(!this.actions.has(e))throw new Error(\"Action \"+e+\" does not exists\");var n=this.actions.get(e);n.addCallback(t)}},{key:\"unsubscribe\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.actions.has(e))throw new Error(\"Action \"+e+\" does not exists\");var n=this.actions.get(e);n.removeCallback(t)}},{key:\"processEvent\",value:function(e){this.paused||this.eventProcessor.processEvent(e,this.actions,this.options)}},{key:\"cleanCombo\",value:function(){this.eventProcessor.cleanCombo(this.options)}},{key:\"isPaused\",value:function(){return this.paused}},{key:\"pause\",value:function(){this.paused=!0}},{key:\"resume\",value:function(){this.paused=!1}},{key:\"resetState\",value:function(){this.actions=new Map,this.initialized=!1,this.eventProcessor=new u.EventProcessor,this.paused=!1}}]),e}();t.shortcutJS=new f,o(n(1)),o(n(2)),o(n(3)),o(n(0)),o(n(5)),o(n(4))}])});\n\n\n// WEBPACK FOOTER //\n// shortcut.js"],"mappings":"AAAA","sourceRoot":""}